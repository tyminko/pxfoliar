import{u as O}from"./Bt8s39X0.js";import{C as y,r as $,ag as V,J as r,Q as M,ah as P,o as T,d,e as u,ai as U,n as j,L as i,f as L,h as x,_ as C,X as I,g as F,a5 as Y,aj as G}from"#entry";import{f as J}from"./htP4lMBb.js";import"./6ldRj6Fs.js";const Q={key:0,class:"loading-indicator"},X=["src","srcset","sizes","width","height","alt","loading"],p=300,R=.1,q=500,K=y({__name:"MediaImage",props:{src:{},alt:{},aspectRatio:{},width:{},height:{},maxW:{},maxH:{},crop:{type:Boolean},focus:{},loading:{},sizes:{},preset:{},provider:{},modifiers:{},palette:{}},setup(o){const e=o,s=$(!1),n=$(!0),c=V("imgRef"),m=O(),k=r(()=>{if(e.preset)return e.preset}),f=r(()=>"sm:100vw md:100vw lg:100vw"),g=r(()=>{try{return m.getSizes(e.src,{sizes:f.value,width:e.width,height:e.height,preset:k.value,crop:e.crop,provider:e.provider||m.options.provider})}catch(t){return console.warn("Image processing failed, using direct src:",t),{src:e.src,srcset:void 0}}}),h=r(()=>g.value.src),N=r(()=>g.value.srcset);M(h,()=>{s.value=!1,n.value=!0,P(w)});const b=r(()=>e.palette?e.palette.split(",").reduce((t,a,l)=>(t[`--c${l}`]=a,t),{}):{}),H=r(()=>({"--trans-dur":`${p}ms`,"--placeholder-delay":`${p*R}ms`,"--loading-show-delay":`${q}ms`,"--max-w":e.maxW??"100vw","--max-h":e.maxH??"100vh","--ar":e.aspectRatio,...b.value}));function W(){s.value=!0,setTimeout(()=>{n.value=!1},p*R)}T(()=>{w()});const v=r(()=>{const t=e.aspectRatio;if(!t||t==="auto")return e.width&&e.height?e.width/e.height:void 0;if(typeof t=="number")return t>0?t:void 0;const a=String(t).trim(),l=Number(a);if(Number.isFinite(l)&&l>0)return l;const B=a.replace(/\s+/g,"").toLowerCase().replace(/Ã—/g,"x"),[D,E]=B.split(/[/:x]/),z=parseFloat(D??""),S=parseFloat(E??"");if(!(!z||!S))return z/S}),A=r(()=>{if(e.sizes)return e.sizes;if(v.value){const t=_(e.maxW??"100vw"),a=_(e.maxH??"100vh");return`min(${t}, ${a} * ${v.value})`}return f.value});function _(t){return typeof t=="number"?`${t}px`:t}function w(){c.value?.complete&&c.value?.naturalWidth>0&&(s.value=!0)}return(t,a)=>(u(),d("div",{class:j(["image-wrap",{"image-loaded":i(s),"show-placeholder":i(n)}]),style:U(i(H))},[i(s)?L("",!0):(u(),d("div",Q,[...a[0]||(a[0]=[x("span",{class:"dots"},null,-1)])])),x("img",{ref_key:"imgRef",ref:c,src:i(h),srcset:i(N),sizes:i(A),width:t.width,height:t.height,alt:t.alt,loading:t.loading,onLoad:W},null,40,X)],6))}}),Z=Object.assign(C(K,[["__scopeId","data-v-84d664d3"]]),{__name:"MediaImage"}),ee=(o,e,s,...n)=>o[e]?I({...o,[e]:()=>J(o[e](),s?.unwrap||s?.mdcUnwrap)},e,s,...n):I(o,e,s,...n),te={key:0,class:"desc"},se=y({__name:"ContentImage",props:{src:{},alt:{},aspectRatio:{},width:{},height:{},maxW:{},maxH:{},crop:{type:Boolean},focus:{},loading:{},sizes:{},preset:{},provider:{},modifiers:{},palette:{}},setup(o){const e=o;return(s,n)=>{const c=Z;return u(),d("figure",null,[F(c,Y(G(e)),null,16),s.$slots.default?(u(),d("figcaption",te,[ee(s.$slots,"default",{mdcUnwrap:"p"},void 0,!0)])):L("",!0)])}}}),ie=Object.assign(C(se,[["__scopeId","data-v-a682c2f7"]]),{__name:"ContentImage"});export{ie as default};
