import{Z as b,R as M,$ as l,U as v,a0 as S,a1 as j,G as I,u as z}from"./BdiK8RR3.js";async function R(t,e){return await U(e).catch(i=>(console.error("Failed to get image meta for "+e,i+""),{width:0,height:0,ratio:0}))}async function U(t){if(typeof Image>"u")throw new TypeError("Image not supported");return new Promise((e,r)=>{const i=new Image;i.onload=()=>{const o={width:i.width,height:i.height,ratio:i.width/i.height};e(o)},i.onerror=o=>r(o),i.src=t})}function w(t){return e=>e?t[e]||e:t.missingValue}function P({formatter:t,keyMap:e,joinWith:r="/",valueMap:i}={}){t||(t=(s,n)=>`${s}=${n}`),e&&typeof e!="function"&&(e=w(e));const o=i||{};return Object.keys(o).forEach(s=>{typeof o[s]!="function"&&(o[s]=w(o[s]))}),(s={})=>Object.entries(s).filter(([a,c])=>typeof c<"u").map(([a,c])=>{const f=o[a];return typeof f=="function"&&(c=f(s[a])),a=typeof e=="function"?e(a):a,t(a,c)}).join(r)}function h(t=""){if(typeof t=="number")return t;if(typeof t=="string"&&t.replace("px","").match(/^\d+$/g))return Number.parseInt(t,10)}function E(t=""){if(t===void 0||!t.length)return[];const e=new Set;for(const r of t.split(" ")){const i=Number.parseInt(r.replace("x",""));i&&e.add(i)}return Array.from(e)}function N(t){if(t.length===0)throw new Error("`densities` must not be empty, configure to `1` to render regular size only (DPR 1.0)")}function O(t){const e={};if(typeof t=="string")for(const r of t.split(/[\s,]+/).filter(i=>i)){const i=r.split(":");i.length!==2?e["1px"]=i[0].trim():e[i[0].trim()]=i[1].trim()}else Object.assign(e,t);return e}function k(t){const e={options:t},r=(o,s={})=>y(e,o,s),i=(o,s={},n={})=>r(o,{...n,modifiers:b(s,n.modifiers||{})}).url;for(const o in t.presets)i[o]=(s,n,a)=>i(s,n,{...t.presets[o],...a});return i.options=t,i.getImage=r,i.getMeta=(o,s)=>H(e,o,s),i.getSizes=(o,s)=>A(e,o,s),e.$img=i,i}async function H(t,e,r){const i=y(t,e,{...r});return typeof i.getMeta=="function"?await i.getMeta():await R(t,i.url)}function y(t,e,r){if(e&&typeof e!="string")throw new TypeError(`input must be a string (received ${typeof e}: ${JSON.stringify(e)})`);if(!e||e.startsWith("data:"))return{url:e};const{provider:i,defaults:o}=L(t,r.provider||t.options.provider),s=T(t,r.preset);if(e=l(e)?e:M(e),!i.supportsAlias){for(const f in t.options.alias)if(e.startsWith(f)){const g=t.options.alias[f];g&&(e=v(g,e.slice(f.length)))}}if(i.validateDomains&&l(e)){const f=S(e).host;if(!t.options.domains.find(g=>g===f))return{url:e}}const n=b(r,s,o);n.modifiers={...n.modifiers};const a=n.modifiers.format;n.modifiers?.width&&(n.modifiers.width=h(n.modifiers.width)),n.modifiers?.height&&(n.modifiers.height=h(n.modifiers.height));const c=i.getImage(e,n,t);return c.format=c.format||a||"",c}function L(t,e){const r=t.options.providers[e];if(!r)throw new Error("Unknown provider: "+e);return r}function T(t,e){if(!e)return{};if(!t.options.presets[e])throw new Error("Unknown preset: "+e);return t.options.presets[e]}function A(t,e,r){const i=h(r.modifiers?.width),o=h(r.modifiers?.height),s=O(r.sizes),n=r.densities?.trim()?E(r.densities.trim()):t.options.densities;N(n);const a=i&&o?o/i:0,c=[],f=[];if(Object.keys(s).length>=1){for(const d in s){const m=x(d,String(s[d]),o,a,t);if(m!==void 0){c.push({size:m.size,screenMaxWidth:m.screenMaxWidth,media:`(max-width: ${m.screenMaxWidth}px)`});for(const p of n)f.push({width:m._cWidth*p,src:_(t,e,r,m,p)})}}D(c)}else for(const d of n){const m=Object.keys(s)[0];let p=m?x(m,String(s[m]),o,a,t):void 0;p===void 0&&(p={size:"",screenMaxWidth:0,_cWidth:r.modifiers?.width,_cHeight:r.modifiers?.height}),f.push({width:d,src:_(t,e,r,p,d)})}C(f);const g=f[f.length-1],u=c.length?c.map(d=>`${d.media?d.media+" ":""}${d.size}`).join(", "):void 0,$=u?"w":"x",W=f.map(d=>`${d.src} ${d.width}${$}`).join(", ");return{sizes:u,srcset:W,src:g?.src}}function x(t,e,r,i,o){const s=o.options.screens&&o.options.screens[t]||Number.parseInt(t),n=e.endsWith("vw");if(!n&&/^\d+$/.test(e)&&(e=e+"px"),!n&&!e.endsWith("px"))return;let a=Number.parseInt(e);if(!s||!a)return;n&&(a=Math.round(a/100*s));const c=i?Math.round(a*i):r;return{size:e,screenMaxWidth:s,_cWidth:a,_cHeight:c}}function _(t,e,r,i,o){return t.$img(e,{...r.modifiers,width:i._cWidth?i._cWidth*o:void 0,height:i._cHeight?i._cHeight*o:void 0},r)}function D(t){t.sort((r,i)=>r.screenMaxWidth-i.screenMaxWidth);let e=null;for(let r=t.length-1;r>=0;r--){const i=t[r];i.media===e&&t.splice(r,1),e=i.media}for(let r=0;r<t.length;r++)t[r].media=t[r+1]?.media||""}function C(t){t.sort((r,i)=>r.width-i.width);let e=null;for(let r=t.length-1;r>=0;r--){const i=t[r];i.width===e&&t.splice(r,1),e=i.width}}const G=P({keyMap:{fit:"c",width:"w",height:"h",format:"f",quality:"q",bg:"bg",background:"bg",crop:"c",cropMode:"cm",aspectRatio:"ar",x:"x",y:"y",xc:"xc",yc:"yc",oix:"oix",oiy:"oiy",oixc:"oixc",oiyc:"oiyc",focus:"fo",radius:"r",border:"b",rotate:"rt",blur:"bl",named:"n",progressive:"pr",lossless:"lo",trim:"t",metadata:"md",colorProfile:"cp",defaultImage:"di",dpr:"dpr",effectSharpen:"e-sharpen",effectUSM:"e-usm",effectContrast:"e-contrast",effectGray:"e-grayscale",original:"orig"},valueMap:{fit:{cover:"maintain_ratio",contain:"pad_resize",fill:"force",inside:"at_max",outside:"at_least",extract:"extract",pad_extract:"pad_extract"},background(t){return t.startsWith("#")?t.replace("#",""):t},crop:{maintain_ratio:"maintain_ratio",force:"force",at_max:"at_max",at_least:"at_least"},cropMode:{pad_resize:"pad_resize",pad_extract:"pad_extract",extract:"extract"},format:{auto:"auto",jpg:"jpg",jpeg:"jpeg",webp:"webp",avif:"avif",png:"png"},focus:{left:"left",right:"right",top:"top",bottom:"bottom",custom:"custom",center:"center",top_left:"top_left",top_right:"top_right",bottom_left:"bottom_left",bottom_right:"bottom_right",auto:"auto",face:"face"},rotate:{auto:"auto",0:"0",90:"90",180:"180",270:"270",360:"360"}},joinWith:",",formatter:(t,e)=>`${t}-${e}`}),F=(t,{modifiers:e={},baseURL:r="/"}={})=>{let i=G(e);return i=i.replace("c-pad_resize","cm-pad_resize"),i=i.replace("c-pad_extract","cm-pad_extract"),i=i.replace("c-extract","cm-extract"),i=i.replace("raw-",""),{url:v(r,i?j(t,{tr:i}):t)}},J=Object.freeze(Object.defineProperty({__proto__:null,getImage:F},Symbol.toStringTag,{value:"Module"})),V={screens:{xs:320,sm:640,md:768,lg:1024,xl:1280,xxl:1536,"2xl":1536},presets:{default:{provider:"imagekit",sizes:"sm:100vw md:100vw lg:100vw xl:100vw xxl:100vw 2xl:100vw"}},provider:"imagekit",domains:[],alias:{},densities:[1,2],format:["webp"],providers:{imagekit:{provider:J,defaults:{urlEndpoint:"https://ik.imagekit.io/mxm",baseURL:"https://ik.imagekit.io/mxm"}}}},q=t=>{const e=z(),r=I();return r.$img||r._img||(r._img=k({...V,event:r.ssrContext?.event,nuxt:{baseURL:e.app.baseURL},runtimeConfig:e}))};export{h as p,q as u};
