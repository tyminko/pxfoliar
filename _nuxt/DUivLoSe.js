import{f as H}from"./NSJDKVwo.js";import{P as $,B as O,r as I,ah as T,E as a,I as U,ai as W,o as F,c as u,d as m,g as p,e as L,Q as r,aj as R,n as P}from"./QHaJHyWe.js";import{u as V}from"./CP57h1rd.js";import{_ as j}from"./DlAUqK2U.js";import"./BhzwEp6S.js";const Y=(i,e,s,...n)=>i[e]?$({...i,[e]:()=>H(i[e](),s?.unwrap||s?.mdcUnwrap)},e,s,...n):$(i,e,s,...n),G={key:0,class:"loading-indicator"},M=["src","srcset","sizes","width","height","alt","loading"],Q={key:0},f=300,C=.1,q=500,J=O({__name:"ContentImage",props:{src:{},alt:{},aspectRatio:{},width:{},height:{},maxW:{},maxH:{},crop:{type:Boolean},focus:{},loading:{},sizes:{},preset:{},provider:{},modifiers:{}},setup(i){const e=i,s=I(!1),n=I(!0),l=T("imgRef"),g=V(),k=a(()=>{if(e.preset)return e.preset}),h=a(()=>"sm:100vw md:100vw lg:100vw"),v=a(()=>{try{return g.getSizes(e.src,{sizes:h.value,width:e.width,height:e.height,preset:k.value,provider:e.provider||g.options.provider})}catch(t){return console.warn("Image processing failed, using direct src:",t),{src:e.src,srcset:void 0}}}),w=a(()=>v.value.src),E=a(()=>v.value.srcset);U(w,()=>{s.value=!1,n.value=!0,W(S)});const N=a(()=>({"--trans-dur":`${f}ms`,"--placeholder-delay":`${f*C}ms`,"--loading-show-delay":`${q}ms`}));function b(){s.value=!0,setTimeout(()=>{n.value=!1},f*C)}F(()=>{S()});const c=a(()=>{const t=e.aspectRatio;if(!t||t==="auto")return e.width&&e.height?e.width/e.height:void 0;if(typeof t=="number")return t>0?t:void 0;const o=String(t).trim(),d=Number(o);if(Number.isFinite(d)&&d>0)return d;const A=o.replace(/\s+/g,"").toLowerCase().replace(/Ã—/g,"x"),[B,D]=A.split(/[/:x]/),z=parseFloat(B??""),y=parseFloat(D??"");if(!(!z||!y))return z/y}),x=a(()=>{if(e.sizes)return e.sizes;if(c.value){const t=_(e.maxW??"100vw"),o=_(e.maxH??"100vh");return`min(${t}, ${o} * ${c.value})`}return h.value});function _(t){return typeof t=="number"?`${t}px`:t}function S(){l.value?.complete&&l.value?.naturalWidth>0&&(s.value=!0)}return(t,o)=>(m(),u("figure",{style:R({"--ar":r(c),...r(N)})},[p("div",{class:P(["image-wrap",{"image-loaded":r(s),"show-placeholder":r(n)}])},[r(s)?L("",!0):(m(),u("div",G,[...o[0]||(o[0]=[p("span",{class:"dots"},null,-1)])])),p("img",{ref_key:"imgRef",ref:l,src:r(w),srcset:r(E),sizes:r(x),width:t.width,height:t.height,alt:t.alt,loading:t.loading,style:R({"--ar":r(c)}),onLoad:b},null,44,M)],2),t.$slots.default?(m(),u("figcaption",Q,[Y(t.$slots,"default",{mdcUnwrap:"p"},void 0,!0)])):L("",!0)],4))}}),se=Object.assign(j(J,[["__scopeId","data-v-e0ed3425"]]),{__name:"ContentImage"});export{se as default};
