import{u as D}from"./Cy-o4ov3.js";import{C as y,r as S,ae as E,J as r,O as M,af as P,o as T,d,e as u,ag as U,n as F,I as i,f as L,h as $,_ as C,V as x,g as j,a3 as Y,ah as G}from"#entry";import{f as J}from"./C-1vIMBI.js";import"./dq8TPKN5.js";const q={key:0,class:"loading-indicator"},K=["src","srcset","sizes","width","height","alt","loading"],p=300,R=.1,Q=500,X=y({__name:"MediaImage",props:{src:{},alt:{},aspectRatio:{},width:{},height:{},maxW:{},maxH:{},crop:{type:Boolean},focus:{},loading:{},sizes:{},preset:{},provider:{},modifiers:{},palette:{}},setup(o){const e=o,s=S(!1),n=S(!0),c=E("imgRef"),m=D(),k=r(()=>{if(e.preset)return e.preset}),f=r(()=>"sm:100vw md:100vw lg:100vw"),g=r(()=>{try{return m.getSizes(e.src,{sizes:f.value,width:e.width,height:e.height,preset:k.value,crop:e.crop,provider:e.provider||m.options.provider})}catch(t){return console.warn("Image processing failed, using direct src:",t),{src:e.src,srcset:void 0}}}),h=r(()=>g.value.src),N=r(()=>g.value.srcset);M(h,()=>{s.value=!1,n.value=!0,P(w)});const b=r(()=>e.palette?e.palette.split(",").reduce((t,a,l)=>(t[`--c${l}`]=a,t),{}):{}),H=r(()=>({"--trans-dur":`${p}ms`,"--placeholder-delay":`${p*R}ms`,"--loading-show-delay":`${Q}ms`,"--max-w":e.maxW??"100vw","--max-h":e.maxH??"100vh","--ar":e.aspectRatio,...b.value}));function O(){s.value=!0,setTimeout(()=>{n.value=!1},p*R)}T(()=>{w()});const v=r(()=>{const t=e.aspectRatio;if(!t||t==="auto")return e.width&&e.height?e.width/e.height:void 0;if(typeof t=="number")return t>0?t:void 0;const a=String(t).trim(),l=Number(a);if(Number.isFinite(l)&&l>0)return l;const W=a.replace(/\s+/g,"").toLowerCase().replace(/Ã—/g,"x"),[A,B]=W.split(/[/:x]/),z=parseFloat(A??""),I=parseFloat(B??"");if(!(!z||!I))return z/I}),V=r(()=>{if(e.sizes)return e.sizes;if(v.value){const t=_(e.maxW??"100vw"),a=_(e.maxH??"100vh");return`min(${t}, ${a} * ${v.value})`}return f.value});function _(t){return typeof t=="number"?`${t}px`:t}function w(){c.value?.complete&&c.value?.naturalWidth>0&&(s.value=!0)}return(t,a)=>(u(),d("div",{class:F(["image-wrap",{"image-loaded":i(s),"show-placeholder":i(n)}]),style:U(i(H))},[i(s)?L("",!0):(u(),d("div",q,[...a[0]||(a[0]=[$("span",{class:"dots"},null,-1)])])),$("img",{ref_key:"imgRef",ref:c,src:i(h),srcset:i(N),sizes:i(V),width:t.width,height:t.height,alt:t.alt,loading:t.loading,onLoad:O},null,40,K)],6))}}),Z=Object.assign(C(X,[["__scopeId","data-v-84d664d3"]]),{__name:"MediaImage"}),ee=(o,e,s,...n)=>o[e]?x({...o,[e]:()=>J(o[e](),s?.unwrap||s?.mdcUnwrap)},e,s,...n):x(o,e,s,...n),te={key:0,class:"desc"},se=y({__name:"ContentImage",props:{src:{},alt:{},aspectRatio:{},width:{},height:{},maxW:{},maxH:{},crop:{type:Boolean},focus:{},loading:{},sizes:{},preset:{},provider:{},modifiers:{},palette:{}},setup(o){const e=o;return(s,n)=>{const c=Z;return u(),d("figure",null,[j(c,Y(G(e)),null,16),s.$slots.default?(u(),d("figcaption",te,[ee(s.$slots,"default",{mdcUnwrap:"p"},void 0,!0)])):L("",!0)])}}}),ie=Object.assign(C(se,[["__scopeId","data-v-a682c2f7"]]),{__name:"ContentImage"});export{ie as default};
