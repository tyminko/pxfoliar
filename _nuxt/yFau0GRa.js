import{f as O}from"./CAbtnAIa.js";import{s as L,f as T,M as R,a2 as U,i as a,k as W,a3 as F,N as V,c as m,o as p,a as f,B as k,x as o,a4 as C,v as M,_ as P}from"./BdiK8RR3.js";import{u as Y}from"./Cv51g1Ku.js";import"./DFNaeu7E.js";const j=(i,e,s,...n)=>i[e]?L({...i,[e]:()=>O(i[e](),s?.unwrap||s?.mdcUnwrap)},e,s,...n):L(i,e,s,...n),G={key:0,class:"loading-indicator"},q=["src","srcset","sizes","width","height","alt","loading"],J={key:0},h=300,I=.1,K=500,Q=T({__name:"ContentImage",props:{src:{},alt:{},aspectRatio:{},width:{},height:{},maxW:{},maxH:{},crop:{type:Boolean},focus:{},loading:{},sizes:{},preset:{},provider:{},modifiers:{}},setup(i){const e=i,s=R(!1),n=R(!0),u=U("imgRef"),l=Y(),N=a(()=>e.provider??l.options.provider),g=a(()=>e.preset??l.options.presets?.default?.preset??"default"),v=a(()=>l.options.presets?.[g.value]?.sizes??"sm:100vw md:100vw lg:100vw"),w=a(()=>l.getSizes(e.src,{sizes:v.value,width:e.width,height:e.height,preset:g.value,provider:N.value})),_=a(()=>w.value.src),x=a(()=>w.value.srcset);W(_,()=>{s.value=!1,n.value=!0,F(S)});const b=a(()=>({"--trans-dur":`${h}ms`,"--placeholder-delay":`${h*I}ms`,"--loading-show-delay":`${K}ms`}));function A(){s.value=!0,setTimeout(()=>{n.value=!1},h*I)}V(()=>{S()});const c=a(()=>{const t=e.aspectRatio;if(!t||t==="auto")return e.width&&e.height?e.width/e.height:void 0;if(typeof t=="number")return t>0?t:void 0;const r=String(t).trim(),d=Number(r);if(Number.isFinite(d)&&d>0)return d;const D=r.replace(/\s+/g,"").toLowerCase().replace(/Ã—/g,"x"),[E,H]=D.split(/[/:x]/),y=parseFloat(E??""),$=parseFloat(H??"");if(!(!y||!$))return y/$}),B=a(()=>{if(e.sizes)return e.sizes;if(c.value){const t=z(e.maxW??"100vw"),r=z(e.maxH??"100vh");return`min(${t}, ${r} * ${c.value})`}return v.value});function z(t){return typeof t=="number"?`${t}px`:t}function S(){u.value?.complete&&u.value?.naturalWidth>0&&(s.value=!0)}return(t,r)=>(p(),m("figure",{style:C({"--ar":o(c),...o(b)})},[f("div",{class:M(["image-wrap",{"image-loaded":o(s),"show-placeholder":o(n)}])},[o(s)?k("",!0):(p(),m("div",G,[...r[0]||(r[0]=[f("span",{class:"dots"},null,-1)])])),f("img",{ref_key:"imgRef",ref:u,src:o(_),srcset:o(x),sizes:o(B),width:t.width,height:t.height,alt:t.alt,loading:t.loading,style:C({"--ar":o(c)}),onLoad:A},null,44,q)],2),t.$slots.default?(p(),m("figcaption",J,[j(t.$slots,"default",{mdcUnwrap:"p"},void 0,!0)])):k("",!0)],4))}}),se=Object.assign(P(Q,[["__scopeId","data-v-497e9989"]]),{__name:"ContentImage"});export{se as default};
