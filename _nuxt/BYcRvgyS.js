import{f as O}from"./405odDV7.js";import{P as L,B as T,r as R,ah as U,E as a,I as W,ai as F,o as P,c as m,d as p,g as f,e as I,Q as o,aj as C,n as V}from"./PQWP5apC.js";import{u as j}from"./B0oFc5hT.js";import{_ as Y}from"./DlAUqK2U.js";import"./BnpAdF9k.js";const G=(i,e,s,...n)=>i[e]?L({...i,[e]:()=>O(i[e](),s?.unwrap||s?.mdcUnwrap)},e,s,...n):L(i,e,s,...n),M={key:0,class:"loading-indicator"},Q=["src","srcset","sizes","width","height","alt","loading"],q={key:0},h=300,k=.1,J=500,K=T({__name:"ContentImage",props:{src:{},alt:{},aspectRatio:{},width:{},height:{},maxW:{},maxH:{},crop:{type:Boolean},focus:{},loading:{},sizes:{},preset:{},provider:{},modifiers:{}},setup(i){const e=i,s=R(!1),n=R(!0),d=U("imgRef"),l=j(),b=a(()=>e.provider??l.options.provider),g=a(()=>e.preset??l.options.presets?.default?.preset??"default"),v=a(()=>l.options.presets?.[g.value]?.sizes??"sm:100vw md:100vw lg:100vw"),w=a(()=>l.getSizes(e.src,{sizes:v.value,width:e.width,height:e.height,preset:g.value,provider:b.value})),_=a(()=>w.value.src),E=a(()=>w.value.srcset);W(_,()=>{s.value=!1,n.value=!0,F(S)});const N=a(()=>({"--trans-dur":`${h}ms`,"--placeholder-delay":`${h*k}ms`,"--loading-show-delay":`${J}ms`}));function x(){s.value=!0,setTimeout(()=>{n.value=!1},h*k)}P(()=>{S()});const c=a(()=>{const t=e.aspectRatio;if(!t||t==="auto")return e.width&&e.height?e.width/e.height:void 0;if(typeof t=="number")return t>0?t:void 0;const r=String(t).trim(),u=Number(r);if(Number.isFinite(u)&&u>0)return u;const B=r.replace(/\s+/g,"").toLowerCase().replace(/Ã—/g,"x"),[D,H]=B.split(/[/:x]/),y=parseFloat(D??""),$=parseFloat(H??"");if(!(!y||!$))return y/$}),A=a(()=>{if(e.sizes)return e.sizes;if(c.value){const t=z(e.maxW??"100vw"),r=z(e.maxH??"100vh");return`min(${t}, ${r} * ${c.value})`}return v.value});function z(t){return typeof t=="number"?`${t}px`:t}function S(){d.value?.complete&&d.value?.naturalWidth>0&&(s.value=!0)}return(t,r)=>(p(),m("figure",{style:C({"--ar":o(c),...o(N)})},[f("div",{class:V(["image-wrap",{"image-loaded":o(s),"show-placeholder":o(n)}])},[o(s)?I("",!0):(p(),m("div",M,[...r[0]||(r[0]=[f("span",{class:"dots"},null,-1)])])),f("img",{ref_key:"imgRef",ref:d,src:o(_),srcset:o(E),sizes:o(A),width:t.width,height:t.height,alt:t.alt,loading:t.loading,style:C({"--ar":o(c)}),onLoad:x},null,44,Q)],2),t.$slots.default?(p(),m("figcaption",q,[G(t.$slots,"default",{mdcUnwrap:"p"},void 0,!0)])):I("",!0)],4))}}),ae=Object.assign(Y(K,[["__scopeId","data-v-2855b001"]]),{__name:"ContentImage"});export{ae as default};
