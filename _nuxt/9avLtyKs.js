import{f as H}from"./D8tPHi_t.js";import{Q as R,C as O,r as $,ae as T,G as a,J as U,af as W,o as F,d as u,e as m,h as f,f as L,R as r,ag as C,n as V,_ as G}from"./624fBW3r.js";import{u as P}from"./DLQnQeDp.js";import"./DJk8L39S.js";const Y=(n,e,s,...i)=>n[e]?R({...n,[e]:()=>H(n[e](),s?.unwrap||s?.mdcUnwrap)},e,s,...i):R(n,e,s,...i),j={key:0,class:"loading-indicator"},J=["src","srcset","sizes","width","height","alt","loading"],M={key:0},p=300,I=.1,Q=500,q=O({__name:"ContentImage",props:{src:{},alt:{},aspectRatio:{},width:{},height:{},maxW:{},maxH:{},crop:{type:Boolean},focus:{},loading:{},sizes:{},preset:{},provider:{},modifiers:{}},setup(n){const e=n,s=$(!1),i=$(!0),l=T("imgRef"),g=P(),k=a(()=>{if(e.preset)return e.preset}),h=a(()=>"sm:100vw md:100vw lg:100vw"),v=a(()=>{try{return g.getSizes(e.src,{sizes:h.value,width:e.width,height:e.height,preset:k.value,provider:e.provider||g.options.provider})}catch(t){return console.warn("Image processing failed, using direct src:",t),{src:e.src,srcset:void 0}}}),w=a(()=>v.value.src),N=a(()=>v.value.srcset);U(w,()=>{s.value=!1,i.value=!0,W(S)});const b=a(()=>({"--trans-dur":`${p}ms`,"--placeholder-delay":`${p*I}ms`,"--loading-show-delay":`${Q}ms`}));function x(){s.value=!0,setTimeout(()=>{i.value=!1},p*I)}F(()=>{S()});const c=a(()=>{const t=e.aspectRatio;if(!t||t==="auto")return e.width&&e.height?e.width/e.height:void 0;if(typeof t=="number")return t>0?t:void 0;const o=String(t).trim(),d=Number(o);if(Number.isFinite(d)&&d>0)return d;const D=o.replace(/\s+/g,"").toLowerCase().replace(/Ã—/g,"x"),[E,B]=D.split(/[/:x]/),z=parseFloat(E??""),y=parseFloat(B??"");if(!(!z||!y))return z/y}),A=a(()=>{if(e.sizes)return e.sizes;if(c.value){const t=_(e.maxW??"100vw"),o=_(e.maxH??"100vh");return`min(${t}, ${o} * ${c.value})`}return h.value});function _(t){return typeof t=="number"?`${t}px`:t}function S(){l.value?.complete&&l.value?.naturalWidth>0&&(s.value=!0)}return(t,o)=>(m(),u("figure",{style:C({"--ar":r(c),...r(b)})},[f("div",{class:V(["image-wrap",{"image-loaded":r(s),"show-placeholder":r(i)}])},[r(s)?L("",!0):(m(),u("div",j,[...o[0]||(o[0]=[f("span",{class:"dots"},null,-1)])])),f("img",{ref_key:"imgRef",ref:l,src:r(w),srcset:r(N),sizes:r(A),width:t.width,height:t.height,alt:t.alt,loading:t.loading,style:C({"--ar":r(c)}),onLoad:x},null,44,J)],2),t.$slots.default?(m(),u("figcaption",M,[Y(t.$slots,"default",{mdcUnwrap:"p"},void 0,!0)])):L("",!0)],4))}}),te=Object.assign(G(q,[["__scopeId","data-v-02283287"]]),{__name:"ContentImage"});export{te as default};
